---
title: "Arch Linux ã§ã€èª¤ã£ã¦ amd-ucode ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å‰Šé™¤ã—ãŸå ´åˆ"
emoji: "ğŸ§"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["linux", "archlinux", "grub"]
published: true
---

ã†ã£ã‹ã‚Š `amd-ucode` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å‰Šé™¤ã—ãŸã‚‰ã€ã€Œamd-ucode.img ãŒãªã„ã!ã€ã¨ã„ã£ãŸã‚¨ãƒ©ãƒ¼ã§èµ·å‹•ã—ãªããªã‚Šã¾ã—ãŸã€‚

ãã®æ™‚ã®ãƒ¡ãƒ¢ã§ã™ã€‚

![Arch Linux Beaten By A Cat](/images/arch-linux-beaten-by-a-cat.webp)


# Arch Linux ã® USB ãƒ¡ãƒ¢ãƒªã‹ã‚‰èµ·å‹•

[å…¬å¼](https://archlinux.org/download/) ã®ã‚„ã¤ã€‚

# ã¾ãšã¯ã€å¯¾è±¡ã®ãƒ‡ã‚£ã‚¹ã‚¯ã‚’ãƒã‚¦ãƒ³ãƒˆ

```sh
# mkdir /mnt/root
# mount /dev/nvme0n1p2 /mnt/root
# mount /dev/nvme0n1p1 /mnt/root/boot
```

# ãƒã‚¦ãƒ³ãƒˆã—ãŸç’°å¢ƒã« chroot ã§å…¥ã‚‹

```sh
# arch-chroot /mnt/root
```

# ã¤ã„ã§ã«ã€å…¥ã£ãŸã¾ã¾ã ã£ãŸ `intel-ucode` ã‚’å‰Šé™¤

```sh
# pacman -S intel-ucode
```

# ã‚„ã‚‰ã‹ã—ã¦å‰Šé™¤ã—ãŸ `amd-ucode` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```sh
# pacman -S amd-ucode
```

ã“ã‚Œã§ã€`/boot/intel-ucode.img` ãŒæ¶ˆãˆã¦ã€`/boot/amd-ucode.img` ãŒå‡ºç¾ã™ã‚‹ã¯ãšã€‚

# ä¸€å¿œãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

(ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’åŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å…¥ã‚Œã¦ãŠã„ãŸã‚‰ã€grub-mkconfig ã‚’ãã¡ã‚‰ã‚’ä½¿ã£ã¦ã¾ã—ãŸ)

```sh
# cd /boot
# mkdir backup
# cp initramfs-linux.img backup/initramfs-linux.img.2024-10-08
# cp vmlinuz-linux backup/vmlinuz-linux.2024-10-08
# cp grub/grub.cfg backup/grub.cfg.2024-10-08
# cp /etc/mkinitcpio.conf backup/mkinitcpio.conf.2024-10-08
```

# initramfs ã‚’å†ç”Ÿæˆ

```sh
# mkinitcpio -p linux
```

# GRUB ã®è¨­å®šã‚’æ›´æ–°

```sh
# grub-mkconfig -o /boot/grub/grub.cfg
```

# ãŠã‚ã‚Šã«

é›‘ã« `pacman -Rs` ã™ã‚‹ã®ã€ã‚„ã‚ã‚ˆã†ã­ã€‚
